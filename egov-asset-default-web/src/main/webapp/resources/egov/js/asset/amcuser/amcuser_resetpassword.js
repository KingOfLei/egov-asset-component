/**
 * * Auto generated by Bossssoft Studio version 1.0 beta Sun Sep 18 11:47:10 CST
 * 2016
 */
// define(['引入外部js模块或控件'],function('引入外部js或控件的别名'){})
define(
		[ "app/widgets/window/app-dialog", "app/app-pagebase" ],
		function(Dialog, PageBase) {
			var AmcUserResetPass = PageBase.extend({
						// 类初始化
						initialize : function() {
							AmcUserResetPass.superclass.initialize.call(this);
						},
						ACTION : {
							ADD : "ADD",
							EDIT : "EDIT",
							VIEW : "VIEW"
						},
						// 存储弹出窗口回调
						showPageCallBack : null,
						// 当前窗口状态
						indexAction : null,
						// 控件监听事件 格式：#控件id#:{事件名:事件方法}
						listeners : {
							// 新增并保存
							
							amcUserPage_saveaddBtn : {
								click : function() {
									var self = AmcUserResetPass.getInstance();
									self.doSave({
										isSaveAdd : true
									});

								}
							},
							// 关闭
							amcUserPage_closeBtn : {
								click : function() {
									$.closeDialog();
								}
							}
						},
						// 保存数据cofig:{isSaveAdd:"保存并新增",isSaveClose:"保存关闭",isSaveView:"保存查看"}可自行扩展
						doSave : function(config, callback) {
							var url = "egov/asset/amcuser/resetPassWord.do";
							var newPassword =$A("#newPassword").val(); 
							var newRepPassword = $A("#newRepPassword").val();
							if(newPassword != newRepPassword){
								$A.assetMsg.warn("两次密码不一致，请修改！");
								
								return false;
							}else{
								$A('#amcUserPageReset_form').sumbitAllComp(
										{
											submitMode : 'all',
											url : url,
											type : "post",
											callback : function(json) {
												$.closeDialog();
												if(json.tag == true){
													$A.assetMsg.success(json.msg);	
												}else{
													$A.assetMsg.warn(json.msg);
												}
												
											}
										});
							}
						},
						// 显示弹出窗口，action
						// 窗口状态来源，ACTION:{ADD:"",EDIT:"",VIEW:""}//可自行扩展
						showPage : function(action, data, callback) {
							this.showPageCallBack = callback || function() {
							};
							var self = this;
							this.indexAction = action;
							var options = {
								url : "egov/asset/amcuser/showResetPassWord.do",
								dialogId : "directPayBookAdd",
								title : "密码重置",
								width : 300,
								height : 200,
								wrapper : false,
								hasheader : true,
								reload : true,
								onPageLoad : function(obj) {
									$A("#amcUserPageReset_form").refreshFormData(data);
								}
							};
							$.openModalDialog(options)
						},

						// 页面加载后初始化
						initPage : function() {
							
						},
						// 控件属性重置
						initUIExtConfig : function() {
							this.uiExtConfig = {

							}
						}

					});
			// 创建窗体类单例
			AmcUserResetPass.getInstance = function() {
				if (!this.instance) {
					this.instance = new AmcUserResetPass();
				}
				return this.instance;
			}

			return AmcUserResetPass.getInstance();
		})